/**
 * Slider Block Styles
 * Shared between editor and frontend
 */

.wp-block-lsx-tour-operator-slider {
	position: relative;
	overflow: hidden;

	&.slider-group-active {
		.slider-group-container {
			position: relative;
			width: 100%;
		}

		.slider-info {
			position: absolute;
			top: 10px;
			right: 10px;
			background: rgba(0, 0, 0, 0.7);
			color: white;
			padding: 4px 8px;
			border-radius: 4px;
			font-size: 12px;
			z-index: 10;
			pointer-events: none;
			display: flex;
			align-items: center;
			gap: 4px;

			.slider-info-text {
				pointer-events: none;
				white-space: nowrap;
			}

			.slider-info-arrow {
				background: transparent;
				border: none;
				color: white;
				cursor: pointer;
				pointer-events: auto;
				padding: 2px;
				border-radius: 2px;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.2s ease;
				width: 16px;
				height: 16px;

				&:hover {
					background: rgba(255, 255, 255, 0.2);
				}

				&:disabled {
					opacity: 0.3;
					cursor: not-allowed;

					&:hover {
						background: transparent;
					}
				}

				svg {
					width: 12px;
					height: 12px;
				}
			}
		}

		.slider-wrapper {
			position: relative;
			width: 100%;
			overflow: hidden; // This ensures only visible slides are shown
		}

		.slider-container {
			position: relative;
			width: 100%;
			overflow: hidden; // Backup overflow control
		}

		.slider-slides-wrapper {
			display: flex !important;
			position: relative;
			width: 100%;
			transition: transform 0.3s ease-in-out;
			// This is the single wrapper that moves to show different slides
		}

		.slider-slide {
			position: relative;
			flex: 0 0 auto;
			transition: transform 0.3s ease-in-out;
			box-sizing: border-box;
			padding: 0 8px;
			display: flex;
			flex-direction: column;

			&.active-slide {
				z-index: 2;
			}

			// Ensure equal heights
			> .wp-block-group__inner-container {
				flex: 1;
				display: flex;
				flex-direction: column;
			}
		}

		// Navigation arrows
		.slider-nav {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			left: 0;
			right: 0;
			display: flex;
			justify-content: space-between;
			pointer-events: none;
			z-index: 15;
			padding: 0 10px;
		}

		.slider-arrow {
			background: rgba(0, 0, 0, 0.7);
			border: none;
			border-radius: 50%;
			width: 40px;
			height: 40px;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			pointer-events: auto;
			transition: all 0.2s ease;
			color: white;
			z-index: 16;

			&:hover {
				background: rgba(0, 0, 0, 0.9);
				transform: scale(1.1);
			}

			&:disabled {
				opacity: 0.3;
				cursor: not-allowed;
				transform: none;

				&:hover {
					transform: none;
				}
			}

			&:focus {
				outline: 2px solid #007cba;
				outline-offset: 2px;
			}

			svg {
				width: 20px;
				height: 20px;
			}
		}

		// Navigation dots (only show on frontend)
		.slider-dots {
			display: flex;
			justify-content: center;
			gap: 8px;
			margin-top: 16px;
			padding: 10px 0;
		}

		.slider-dot {
			width: 12px;
			height: 12px;
			border-radius: 50%;
			border: 2px solid #ccc;
			background: transparent;
			cursor: pointer;
			transition: all 0.2s ease;
			padding: 0;

			&:hover {
				border-color: #666;
			}

			&.active {
				background: #007cba;
				border-color: #007cba;
			}

			&:focus {
				outline: 2px solid #007cba;
				outline-offset: 2px;
			}
		}

		// Responsive behavior
		@media (max-width: 768px) {
			.slider-arrow {
				width: 32px;
				height: 32px;

				svg {
					width: 16px;
					height: 16px;
				}
			}

			.slider-slide {
				padding: 0 4px;
			}
		}
	}

	// Editor specific styles
	&.is-selected {
		.slider-info {
			background: rgba(0, 123, 186, 0.8);
		}
	}

	// Dragging state
	&.is-dragging {
		.slider-container,
		.slider-slides-wrapper {
			transition: none;
		}

		.slider-slide {
			transition: none;
		}
	}
}

// Editor specific enhancements
.block-editor-block-list__layout {
	.wp-block-lsx-tour-operator-slider {
		// Ensure proper spacing in editor
		margin: 16px 0;

		&.slider-group-active {
			// Hide dots in editor by default
			.slider-dots {
				display: none !important;
			}

			// Make sure arrows are always visible in editor
			.slider-nav {
				opacity: 1;
				visibility: visible;
			}

			.slider-arrow {
				background: rgba(0, 123, 186, 0.8);

				&:hover {
					background: rgba(0, 123, 186, 1);
				}
			}
		}

		.slider-slide-appender {
			display: flex;
			align-items: center;
			justify-content: center;
			min-height: 100px;
			border: 2px dashed #ccc;
			border-radius: 4px;
			margin: 0 8px;
			flex: 0 0 auto;
			width: calc(33.333% - 16px);

			.block-list-appender {
				margin: 0;
			}
		}

		// Make slides clickable in editor
		.slider-slide {
			cursor: pointer;

			&:hover {
				outline: 2px solid #007cba;
				outline-offset: 2px;
			}

			&.is-selected {
				outline: 2px solid #007cba;
				outline-offset: 2px;
			}
		}
	}
}

// Animation utilities
.slider-fade-enter {
	opacity: 0;
}

.slider-fade-enter-active {
	opacity: 1;
	transition: opacity 0.3s ease;
}

.slider-fade-exit {
	opacity: 1;
}

.slider-fade-exit-active {
	opacity: 0;
	transition: opacity 0.3s ease;
}

// Accessibility improvements
@media (prefers-reduced-motion: reduce) {
	.wp-block-lsx-tour-operator-slider {
		&.slider-group-active {
			.slider-container,
			.slider-slides-wrapper,
			.slider-slide,
			.slider-arrow {
				transition: none !important;
			}
		}
	}
}

// High contrast mode support
@media (prefers-contrast: high) {
	.wp-block-lsx-tour-operator-slider {
		&.slider-group-active {
			.slider-arrow {
				background: black;
				border: 2px solid white;
			}

			.slider_dot {
				border-color: black;

				&.active {
					background: black;
				}
			}
		}
	}
}
